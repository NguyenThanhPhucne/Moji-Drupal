{#
/**
 * @file
 * Theme template for viewing single user details in admin.
 *
 * Available variables:
 * - user: User entity object
 */
#}

<div class="chat-admin-user-view">
  <div class="page-header">
    <h1>{{ 'User Details'|t }}: {{ user.getAccountName() }}</h1>
    <div class="header-actions">
      <a href="/user/{{ user.id }}/edit" class="btn btn-primary">{{ 'Edit User'|t }}</a>
      <a href="/admin/chat/users" class="btn btn-secondary">{{ 'Back to List'|t }}</a>
    </div>
  </div>

  <div class="user-details-grid">
    
    {# Basic info #}
    <div class="details-card">
      <h2>{{ 'Basic Information'|t }}</h2>
      <dl class="details-list">
        <dt>{{ 'User ID'|t }}</dt>
        <dd>{{ user.id }}</dd>
        
        <dt>{{ 'Username'|t }}</dt>
        <dd>{{ user.getAccountName() }}</dd>
        
        <dt>{{ 'Email'|t }}</dt>
        <dd>{{ user.getEmail() }}</dd>
        
        <dt>{{ 'Status'|t }}</dt>
        <dd>
          {% if user.isActive() %}
            <span class="status-badge status-active">{{ 'Active'|t }}</span>
          {% else %}
            <span class="status-badge status-blocked">{{ 'Blocked'|t }}</span>
          {% endif %}
        </dd>
        
        <dt>{{ 'Created'|t }}</dt>
        <dd>{{ user.getCreatedTime()|date('Y-m-d H:i:s') }}</dd>
        
        <dt>{{ 'Last Access'|t }}</dt>
        <dd>
          {% if user.getLastAccessedTime() > 0 %}
            {{ user.getLastAccessedTime()|date('Y-m-d H:i:s') }}
          {% else %}
            {{ 'Never'|t }}
          {% endif %}
        </dd>
      </dl>
    </div>

    {# Chat statistics #}
    <div class="details-card">
      <h2>{{ 'Chat Statistics'|t }}</h2>
      <dl class="details-list">
        <dt>{{ 'Friends'|t }}</dt>
        <dd>TODO: Implement friend count</dd>
        
        <dt>{{ 'Messages Sent'|t }}</dt>
        <dd>TODO: Fetch from Node.js</dd>
        
        <dt>{{ 'Conversations'|t }}</dt>
        <dd>TODO: Fetch from Node.js</dd>
        
        <dt>{{ 'Pending Friend Requests'|t }}</dt>
        <dd>TODO: Implement pending requests count</dd>
      </dl>
    </div>

  </div>

  {# Actions #}
  <div class="user-actions">
    <h2>{{ 'Actions'|t }}</h2>
    {% if user.isActive() %}
      <button class="btn btn-danger" id="banUserBtn" data-user-id="{{ user.id }}">
        {{ 'Ban User'|t }}
      </button>
    {% else %}
      <button class="btn btn-success" id="unbanUserBtn" data-user-id="{{ user.id }}">
        {{ 'Unban User'|t }}
      </button>
    {% endif %}
  </div>

  {# TODO: Add recent activity, friend list, etc. #}

</div>
