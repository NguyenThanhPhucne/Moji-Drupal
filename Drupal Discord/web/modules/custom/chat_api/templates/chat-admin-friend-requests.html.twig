{#
/**
 * @file
 * Theme template for Chat Admin Friend Requests.
 *
 * Available variables:
 * - requests: Array of friend request objects with user details
 * - stats: Summary statistics
 */
#}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<div class="chat-admin-friend-requests">
  <div class="page-header">
    <div class="header-left">
      <a href="/admin/chat" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> {{ 'Back to Dashboard'|t }}
      </a>
      <h1>
        <i class="fas fa-user-plus"></i>
        {{ 'Friend Requests'|t }}
      </h1>
    </div>
  </div>

  {# Stats boxes #}
  {% if stats %}
    <div class="stats-overview">
      <div class="stat-box">
        <div class="stat-icon">
          <i class="fas fa-list"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ stats.total_requests }}</div>
          <div class="stat-label">{{ 'Total Requests'|t }}</div>
        </div>
      </div>
      <div class="stat-box">
        <div class="stat-icon">
          <i class="fas fa-clock"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ stats.pending_requests }}</div>
          <div class="stat-label">{{ 'Pending Requests'|t }}</div>
        </div>
      </div>
    </div>
  {% endif %}

  {% if requests|length > 0 %}
    <div class="table-wrapper">
      <table class="admin-table">
        <thead>
          <tr>
            <th>{{ 'ID'|t }}</th>
            <th>{{ 'From'|t }}</th>
            <th>{{ 'To'|t }}</th>
            <th>{{ 'Created'|t }}</th>
            <th>{{ 'Actions'|t }}</th>
          </tr>
        </thead>
        <tbody>
          {% for request in requests %}
          <tr>
            <td><span class="id-badge">#{{ request.id }}</span></td>
            <td>
              <div class="user-cell">
                <div class="user-avatar">{{ request.from_name|first|upper }}</div>
                <div class="user-info">
                  <a href="/admin/chat/users/{{ request.from_user }}" class="user-name">
                    {{ request.from_name }}
                  </a>
                  <div class="user-email">{{ request.from_email }}</div>
                </div>
              </div>
            </td>
            <td>
              <div class="user-cell">
                <div class="user-avatar">{{ request.to_name|first|upper }}</div>
                <div class="user-info">
                  <a href="/admin/chat/users/{{ request.to_user }}" class="user-name">
                    {{ request.to_name }}
                  </a>
                  <div class="user-email">{{ request.to_email }}</div>
                </div>
              </div>
            </td>
            <td>
              <div class="time-info">
                <div class="date">{{ request.created|date('M d, Y') }}</div>
                <div class="time-ago">{{ request.time_ago }}</div>
              </div>
            </td>
            <td>
              <div class="action-buttons">
                <a href="/admin/chat/users/{{ request.from_user }}" class="btn-icon" title="{{ 'View Sender'|t }}">
                  <i class="fas fa-user"></i>
                </a>
                <a href="/admin/chat/users/{{ request.to_user }}" class="btn-icon" title="{{ 'View Receiver'|t }}">
                  <i class="fas fa-user-check"></i>
                </a>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {# Pagination #}
    {{ pager }}
  {% else %}
    <div class="empty-state">
      <i class="fas fa-user-plus"></i>
      <h2>{{ 'No friend requests found'|t }}</h2>
      <p>{{ 'There are no friend requests in the system yet.'|t }}</p>
    </div>
  {% endif %}

</div>
